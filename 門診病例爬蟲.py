
from bs4 import BeautifulSoup
import urllib, re, random, time, csv, re

headers = {'User-Agent':'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'} 
url = 'https://reg.ntuh.gov.tw/WebAdministration/ClinicCurrentLightNoByDeptCode.aspx?tag_box_on=1&P_tag_no_=RepeatDoctorList$_ctl2$LabelDRNameList'
form_data = {
"__EVENTTARGET":"",
"__EVENTARGUMENT":"",
"__LASTFOCUS":"",
"__VIEWSTATE":"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",
"__VIEWSTATEGENERATOR":"822B3726",
"SelectHospDeptAndAMPM":"DropListHosp:T0",
"SelectHospDeptAndAMPM":"DropDownDept:CHDH",
"SelectHospDeptAndAMPM":"DropDownAMPM:1",
"SelectHospDeptAndAMPM":"QueryDateText:2018/01/20",
"SelectHospDeptAndAMPM":"QueryButton:查詢",
"RepeatDoctorList:_ctl0":"HiddenServiceIDSE:3211192",
"RepeatDoctorList:_ctl1":"HiddenServiceIDSE:3211181",
"RepeatDoctorList:_ctl2":"HiddenServiceIDSE:3211257",
"RepeatDoctorList:_ctl3":"HiddenServiceIDSE:3211264",
"RepeatDoctorList:_ctl4":"HiddenServiceIDSE:3211258",
"RepeatDoctorList:_ctl5":"HiddenServiceIDSE:3211248",
"RepeatDoctorList:_ctl6":"HiddenServiceIDSE:3211265",
"RepeatDoctorList:_ctl7":"HiddenServiceIDSE:3211267",
"RepeatDoctorList:_ctl8":"HiddenServiceIDSE:3211218",
"RepeatDoctorList:_ctl9":"HiddenServiceIDSE:3211266"
}
form_data = urllib.parse.urlencode(form_data).encode("utf-8")
print(form_data)


request = urllib.request.Request(url, headers = headers, data = form_data)  
response = urllib.request.urlopen(request) 
print(response)

soup = BeautifulSoup(response, "lxml")

"""
print(soup.find("a", {"id":"RepeatDoctorList__ctl5_LabelDRNameList"}).text)
print(soup.find("span", {"id":"RepeatDoctorList__ctl5_LabelClinicNameList"}).text)
"""